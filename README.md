# Record-Replay Mock Creator

Create Mockito java code by replaying executions.

Let's say you have a dependency with random behavior

```java
import java.util.Random;

public class Dice {
    public Dice(){}

    public int roll() {
        return new Random().nextInt(6) + 1;
    }
}
```

It would be nice to have some way to generate the following code by recording a real object.

```java
public class MockDiceCreator {
  public Dice create() {
    Dice mockDice = Mockito.mock(Dice.class);
    doReturn(2)
            .doReturn(3)
            .doReturn(3)
            .when(mockDice)
            .roll();
    return mockDice;
  }
}
```
Good news!
This package enables you to do so!

The code above was generated by this example
```java
import org.katie.orange.core.Listener;
import org.katie.orange.core.CodeSynthesizer;

public class Main {
    public static void main(String[] args) {

        Dice dice = new Dice();

        Listener listener = new Listener();
        Dice wrappedDice = listener.wrap(dice);
        for (int i = 1; i <= 5; i++) {
            wrappedDice.roll();
        }
        CodeSynthesizer synth = new CodeSynthesizer("org.katie.orange.examples", "create");
        System.out.println(synth.generateMockito(root));
    }
}
```

There are 2 modifications required.
1. Wrapping the target object with a `Listener`
2. Generating the code with a `CodeSynthesizer`

That's it!


